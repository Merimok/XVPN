# üîß CI/CD –°–∏—Å—Ç–µ–º–∞ XVPN - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–±–æ—Ä–∫–µ

**–î–∞—Ç–∞:** 10 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ  

---

## üêõ **–†–µ—à–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**

### **–û—à–∏–±–∫–∞:**
```
Run copy sing-box\\sing-box.exe build\\windows\\runner\\Release\\sing-box.exe
The system cannot find the path specified.
0 file(s) copied.
```

### **–ü—Ä–∏—á–∏–Ω–∞:**
- –§–∞–π–ª—ã `sing-box.exe` –∏ `wintun.dll` –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ CI/CD
- –ö–æ–º–∞–Ω–¥—ã –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å –¥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ sing-box**
```yaml
- name: Download latest sing-box binary
  shell: bash
  run: |
    VERSION=$(curl -s https://api.github.com/repos/SagerNet/sing-box/releases/latest | grep '"tag_name":' | cut -d '"' -f4)
    FILE="sing-box-${VERSION#v}-windows-amd64.exe"
    URL="https://github.com/SagerNet/sing-box/releases/download/${VERSION}/${FILE}"
    mkdir -p vpn_client/sing-box
    echo "Downloading $URL..."
    curl -L "$URL" -o "vpn_client/sing-box/sing-box.exe"
```

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ Wintun**
```yaml
- name: Download Wintun DLL
  shell: bash
  run: |
    echo "Downloading Wintun DLL..."
    curl -L "https://www.wintun.net/builds/wintun-0.14.1.zip" -o wintun.zip
    unzip -q wintun.zip
    mkdir -p vpn_client/sing-box
    cp wintun/bin/amd64/wintun.dll vpn_client/sing-box/wintun.dll
    rm -rf wintun.zip wintun
```

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**
```yaml
- name: Copy dependencies to release folder
  shell: cmd
  working-directory: vpn_client
  run: |
    copy sing-box\sing-box.exe build\windows\runner\Release\sing-box.exe
    if exist sing-box\wintun.dll copy sing-box\wintun.dll build\windows\runner\Release\wintun.dll
```

---

## üîÑ **Workflow –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

### **1. build_windows.yml** - –æ—Å–Ω–æ–≤–Ω–∞—è —Å–±–æ—Ä–∫–∞
- **–¢—Ä–∏–≥–≥–µ—Ä**: Push –≤ main, Pull requests
- **–§—É–Ω–∫—Ü–∏–∏**: 
  - –°–∫–∞—á–∏–≤–∞–µ—Ç sing-box –∏ wintun –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  - –°–æ–±–∏—Ä–∞–µ—Ç Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  - –ö–æ–ø–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  - –°–æ–∑–¥–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏

### **2. release.yml** - —Ä–µ–ª–∏–∑ —Å–±–æ—Ä–∫–∞
- **–¢—Ä–∏–≥–≥–µ—Ä**: Push —Ç–µ–≥–æ–≤ v*
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –í—Å–µ –∏–∑ build_windows.yml
  - –°–æ–∑–¥–∞–µ—Ç ZIP –∞—Ä—Ö–∏–≤
  - –ü—É–±–ª–∏–∫—É–µ—Ç GitHub Release
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç changelog –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### **3. build.yml** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–¢—Ä–∏–≥–≥–µ—Ä**: Push, Pull requests
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º
  - –ù–µ —Å–æ–∑–¥–∞–µ—Ç —Å–±–æ—Ä–∫—É (—Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è)

---

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤**

### **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏:**
```
build/windows/runner/Release/
‚îú‚îÄ‚îÄ vpn_client.exe      ‚úÖ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ sing-box.exe        ‚úÖ VPN –¥–≤–∏–∂–æ–∫ (–∞–≤—Ç–æ—Å–∫–∞—á–∞–Ω)
‚îú‚îÄ‚îÄ wintun.dll         ‚úÖ Windows TUN –¥—Ä–∞–π–≤–µ—Ä (–∞–≤—Ç–æ—Å–∫–∞—á–∞–Ω)
‚îú‚îÄ‚îÄ data/              ‚úÖ Flutter —Ä–µ—Å—É—Ä—Å—ã
‚îî‚îÄ‚îÄ *.dll              ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```

### **ZIP —Ä–µ–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- –ì–æ—Ç–æ–≤–æ–µ –∫ –∑–∞–ø—É—Å–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫

---

## üöÄ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CI/CD**

### **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–≤–µ—Ç–∫–∞ main):**
```bash
git push origin main
# ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è build_windows.yml
# ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç windows-build
```

### **–î–ª—è —Ä–µ–ª–∏–∑–∞:**
```bash
git tag -a v1.2.6 -m "Release v1.2.6"
git push origin v1.2.6
# ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è release.yml  
# ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è GitHub Release —Å ZIP —Ñ–∞–π–ª–æ–º
```

### **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
1. **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: GitHub Actions ‚Üí build_windows ‚Üí Artifacts
2. **–†–µ–ª–∏–∑ —Ñ–∞–π–ª—ã**: GitHub Releases ‚Üí Latest Release ‚Üí Assets

---

## üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º**

### **–ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –ø–∞–¥–∞–µ—Ç:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ GitHub Actions**
2. **–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**
   - –°–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ sing-box/wintun)
   - Flutter –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (pub get failed)
   - –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (dart analyze failed)

3. **–û—Ç–ª–∞–¥–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å sing-box API
curl -s https://api.github.com/repos/SagerNet/sing-box/releases/latest

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Wintun
curl -I https://www.wintun.net/builds/wintun-0.14.1.zip

# –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
cd vpn_client
flutter build windows --release
```

---

## üìä **–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã**

### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤  
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤

### üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è** —Å–±–æ—Ä–∫–∞ Windows –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ù—É–ª–µ–≤–∞—è —Ä—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–æ–≤
- **–ì–æ—Ç–æ–≤—ã–µ –∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é** ZIP —Ñ–∞–π–ª—ã
- **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è** CI/CD —Å–∏—Å—Ç–µ–º–∞

---

## üìã **–ß–µ–∫-–ª–∏—Å—Ç —Ä–µ–ª–∏–∑–∞**

### **–ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ä–µ–ª–∏–∑–∞:**
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ö–æ–¥ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (flutter analyze)
- ‚úÖ –í–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ pubspec.yaml
- ‚úÖ CHANGELOG.md –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ Commit —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

### **–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞:**
```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é
git add pubspec.yaml CHANGELOG.md
git commit -m "chore: Update version to v1.2.6"

# 2. –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥
git tag -a v1.2.6 -m "Release v1.2.6: Description"

# 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å
git push origin main
git push origin v1.2.6

# 4. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
#    - –°–æ–±–µ—Ä–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
#    - –°–∫–∞—á–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏  
#    - –°–æ–∑–¥–∞—Å—Ç GitHub Release
#    - –û–ø—É–±–ª–∏–∫—É–µ—Ç ZIP —Ñ–∞–π–ª
```

---

**‚úÖ CI/CD —Å–∏—Å—Ç–µ–º–∞ XVPN –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞!**

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 10 –∏—é–Ω—è 2025*  
*–°—Ç–∞—Ç—É—Å: Production Ready* üöÄ
